# Terraform Module: General - Storage Account (Secure)

This Terraform module creates a secure Azure Storage Account with enforced best practices for security, naming conventions, and optional random suffixes. 
It ensures storage accounts are created with HTTPS-only access, no shared keys, and optional name truncation to comply with Azure naming rules.

It is designed to be reusable across environments while maintaining consistent security standards.

---

## Features

- **Automatically enforces secure configuration**
  - HTTPS traffic only. 
  - Disables shared access keys. 
  - Prevents anonymous/public access. 
- **Generates compliant storage account names**
  - Removes illegal characters. 
  - Supports optional random suffix. 
  - Truncates names to Azureâ€™s 24-character limit. 
- Supports configurable account tier, replication type, and kind. 
- Outputs Storage Account ID, name, and resource group for easy reference. 

---

## Usage

```hcl
module "secure_storage" {
  source = "github.com/your-org/terraform-azure-secure-storage"
  storage_account_name = "abcplatformhubplz" # Desired base name
  resource_group_name = "rg-platform-hub-plz"
  location = "northeurope"
  tags = {
    Environment = "plz"
    Project = "platform"
  }
  account_tier = "Standard"
  account_replication_type = "LRS"
  account_kind = "StorageV2"
}
```

---

<!-- BEGIN_TF_DOCS -->
<!-- Code generated by terraform-docs. DO NOT EDIT. -->


<!-- markdownlint-disable MD033 -->
## Requirements

No requirements.

## Resources

| Name | Type |
|------|------|
| [azurerm_storage_account.main](https://registry.terraform.io/providers/hashicorp/azurerm/latest/docs/resources/storage_account) | resource |
| [random_string.rndstr](https://registry.terraform.io/providers/hashicorp/random/latest/docs/resources/string) | resource |

<!-- markdownlint-disable MD013 -->
## Inputs

| Name | Description | Type | Default | Required |
|------|-------------|------|---------|:--------:|
| <a name="input_location"></a> [location](#input\_location) | Location of Storage Account. | `string` | n/a | yes |
| <a name="input_resource_group_name"></a> [resource\_group\_name](#input\_resource\_group\_name) | Target Resource Group for the Storage Account to be created in. | `string` | n/a | yes |
| <a name="input_storage_account_name"></a> [storage\_account\_name](#input\_storage\_account\_name) | Desired name for the new storage account. | `string` | n/a | yes |
| <a name="input_tags"></a> [tags](#input\_tags) | Map of key/value pairs containing tag names and values. | `map(string)` | n/a | yes |
| <a name="input_account_kind"></a> [account\_kind](#input\_account\_kind) | Defines the kind of storage account. | `string` | `"StorageV2"` | no |
| <a name="input_account_replication_type"></a> [account\_replication\_type](#input\_account\_replication\_type) | Defines the type of replication to use for this storage account. | `string` | `"LRS"` | no |
| <a name="input_account_tier"></a> [account\_tier](#input\_account\_tier) | Defines the tier to use for the storage account. | `string` | `"Standard"` | no |

## Outputs

| Name | Description |
|------|-------------|
| <a name="output_id"></a> [id](#output\_id) | ID of the created Storage Account. |
| <a name="output_resource_group"></a> [resource\_group](#output\_resource\_group) | Resource Group of the created Storage Account. |
| <a name="output_storage_account_name"></a> [storage\_account\_name](#output\_storage\_account\_name) | Name of the created Storage Account. |

## Modules

No modules.

<!-- END_TF_DOCS -->
